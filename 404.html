<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>404 - 无响应页面</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        /* ========== 全局基础样式 ========== */
        :root {
            --neon-blue: #00f3ff;
            --neon-purple: #b967ff;
            --neon-pink: #ff2ac3;
            --light-space: #121230;
            --matrix-green: #00ff41;
            --text-glow: 0 0 12px var(--neon-blue), 0 0 24px rgba(0, 243, 255, 0.6);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* ========== 模式切换控制 ========== */
        body.mode-default {
            background: linear-gradient(135deg, #0a0a20 0%, #121240 50%, #1a1a50 100%);
            color: #f0f8ff;
            min-height: 100vh;
            font-family: 'Rajdhani', sans-serif;
            overflow: hidden;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        body.mode-rules {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Microsoft YaHei", sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8fafc;
            padding: 20px;
            min-height: 100vh;
            display: block;
            overflow: auto;
        }

        #default-404-wrapper, #rules-404-wrapper {
            display: none;
        }

        body.mode-default #default-404-wrapper {
            display: block;
            width: 100%;
        }

        body.mode-rules #rules-404-wrapper {
            display: block;
            width: 100%;
        }

        /* ========== 默认 404 样式 (mode-default) ========== */
        body.mode-default #particles-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            pointer-events: none;
        }

        body.mode-default .container {
            position: relative;
            z-index: 10;
            max-width: 900px;
            width: 100%;
            margin: 0 auto;
            background: rgba(20, 25, 60, 0.75);
            backdrop-filter: blur(15px);
            border-radius: 24px;
            border: 1px solid rgba(0, 243, 255, 0.4);
            padding: 50px 40px;
            text-align: center;
            box-shadow: 
                0 0 60px rgba(0, 243, 255, 0.25),
                inset 0 0 40px rgba(0, 20, 40, 0.5);
            overflow: hidden;
        }

        body.mode-default .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--neon-blue), var(--neon-pink), transparent);
            animation: scanline 3s linear infinite;
            z-index: 12;
            filter: blur(1px);
        }

        body.mode-default .glitch-tech {
            font-family: 'Orbitron', sans-serif;
            font-size: 9rem;
            font-weight: 900;
            color: #ffffff;
            position: relative;
            letter-spacing: 10px;
            text-transform: uppercase;
            margin-bottom: 15px;
            text-shadow: var(--text-glow);
        }

        body.mode-default .glitch-tech::before,
        body.mode-default .glitch-tech::after {
            content: '404';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        body.mode-default .glitch-tech::before {
            animation: glitch-tech-1 1.8s infinite linear alternate-reverse;
            color: var(--neon-blue);
            z-index: -1;
            filter: blur(1px);
        }

        body.mode-default .glitch-tech::after {
            animation: glitch-tech-2 2.2s infinite linear alternate-reverse;
            color: var(--neon-pink);
            z-index: -2;
            filter: blur(2px);
        }

        @keyframes glitch-tech-1 {
            0%, 100% { clip-path: inset(10% 0 70% 0); transform: translate(-8px, 4px); opacity: 0.9; }
            25% { clip-path: inset(75% 0 5% 0); transform: translate(6px, -5px); opacity: 0.8; }
            50% { clip-path: inset(5% 0 85% 0); transform: translate(-5px, 3px); opacity: 0.9; }
            75% { clip-path: inset(60% 0 20% 0); transform: translate(7px, -3px); opacity: 0.8; }
        }

        @keyframes glitch-tech-2 {
            0%, 100% { clip-path: inset(70% 0 15% 0); transform: translate(6px, -4px); opacity: 0.8; }
            25% { clip-path: inset(15% 0 75% 0); transform: translate(-7px, 5px); opacity: 0.9; }
            50% { clip-path: inset(85% 0 5% 0); transform: translate(4px, -3px); opacity: 0.8; }
            75% { clip-path: inset(25% 0 65% 0); transform: translate(-6px, 4px); opacity: 0.9; }
        }

        body.mode-default .subtitle-tech {
            font-size: 1.6rem;
            color: #a8feff;
            font-weight: 600;
            letter-spacing: 4px;
            text-transform: uppercase;
            margin-top: -10px;
            text-shadow: 0 0 15px rgba(168, 254, 255, 0.8);
        }

        body.mode-default .info-panel {
            background: rgba(10, 20, 50, 0.7);
            border: 1px solid rgba(0, 243, 255, 0.4);
            border-radius: 16px;
            padding: 35px 40px 55px 40px;
            margin: 40px auto;
            max-width: 800px;
            position: relative;
            text-align: left;
            min-height: 220px;
            display: flex;
            align-items: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        body.mode-default .quote-display {
            font-size: 1.6rem;
            line-height: 1.8;
            color: #f0f8ff;
            width: 100%;
            min-height: 140px;
            font-weight: 500;
            position: relative;
            padding-bottom: 25px;
        }

        body.mode-default .typing-cursor {
            display: inline-block;
            width: 4px;
            height: 1.8rem;
            background-color: var(--neon-blue);
            margin-left: 5px;
            animation: cursor-blink 0.8s infinite;
            vertical-align: middle;
            box-shadow: 0 0 8px var(--neon-blue);
        }

        @keyframes cursor-blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.3; }
        }

        body.mode-default .quote-signature {
            position: absolute;
            bottom: 0;
            right: 0;
            color: #f0f8ff;
            font-size: 1.3rem;
            font-style: normal;
            font-weight: 400;
            font-family: 'Rajdhani', sans-serif;
            line-height: 1.6;
            text-align: right;
            padding: 8px 0 0 20px;
            opacity: 1;
            letter-spacing: 0.5px;
        }

        body.mode-default .refresh-quote-btn {
            position: absolute;
            top: -25px;
            right: -25px;
            width: 55px;
            height: 55px;
            border-radius: 50%;
            background: rgba(0, 243, 255, 0.2);
            border: 2px solid rgba(0, 243, 255, 0.6);
            color: var(--neon-blue);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            transition: all 0.4s ease;
            z-index: 25;
            backdrop-filter: blur(8px);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.4);
        }

        body.mode-default .refresh-quote-btn:hover {
            background: rgba(0, 243, 255, 0.35);
            border-color: var(--neon-blue);
            transform: rotate(180deg) scale(1.1);
            box-shadow: 0 0 35px rgba(0, 243, 255, 0.8);
            top: -28px;
            right: -28px;
        }

        body.mode-default #runaway-btn {
            padding: 22px 45px;
            font-size: 1.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, rgba(0, 243, 255, 0.25), rgba(185, 103, 255, 0.25));
            color: white;
            border: 2px solid rgba(0, 243, 255, 0.6);
            border-radius: 70px;
            cursor: pointer;
            transition: all 0.2s ease;
            position: fixed;
            box-shadow: 0 0 40px rgba(0, 243, 255, 0.4), inset 0 0 20px rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            z-index: 100;
            font-family: 'Orbitron', sans-serif;
            letter-spacing: 2px;
            text-transform: uppercase;
            backdrop-filter: blur(10px);
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
        }

        body.mode-default .actions {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 25px;
            margin-top: 40px;
        }

        body.mode-default .action-btn {
            padding: 18px 38px;
            background: rgba(0, 40, 80, 0.6);
            border: 2px solid rgba(0, 243, 255, 0.4);
            border-radius: 12px;
            color: #f0f8ff;
            text-decoration: none;
            font-weight: 700;
            display: inline-flex;
            align-items: center;
            transition: all 0.3s ease;
            font-family: 'Rajdhani', sans-serif;
            letter-spacing: 1.5px;
            font-size: 1.1rem;
        }

        body.mode-default .action-btn:hover {
            background: rgba(0, 60, 120, 0.8);
            border-color: var(--neon-blue);
            transform: translateY(-8px);
            box-shadow: 0 15px 30px rgba(0, 243, 255, 0.3);
        }

        body.mode-default .btn-home {
            background: linear-gradient(135deg, rgba(0, 150, 255, 0.4), rgba(0, 243, 255, 0.4));
            border: 2px solid rgba(0, 200, 255, 0.6);
        }

        body.mode-default footer {
            margin-top: 60px;
            color: #8bbcd8;
            font-size: 1rem;
            letter-spacing: 0.8px;
            text-align: center;
        }

        @keyframes scanline {
            0% { left: -100%; opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { left: 200%; opacity: 0; }
        }

        /* ========== 规则 404 样式 (mode-rules) ========== */
        body.mode-rules .rules-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        body.mode-rules .rules-header {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 40px;
            padding: 30px 0;
            flex-wrap: wrap;
            gap: 20px;
        }

        body.mode-rules .rules-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid white;
            box-shadow: 0 6px 20px rgba(0, 150, 255, 0.25);
        }

        body.mode-rules .rules-title-section {
            text-align: center;
        }

        body.mode-rules h1 {
            font-size: 28px;
            font-weight: 600;
            color: #1e293b;
            position: relative;
            display: inline-block;
            padding-bottom: 12px;
        }

        body.mode-rules h1:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 3px;
            background-color: #0096ff;
            border-radius: 2px;
        }

        body.mode-rules .rules-subtitle {
            color: #64748b;
            margin-top: 8px;
            font-size: 15px;
        }

        body.mode-rules .rule-item {
            background-color: white;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            border-left: 4px solid #0096ff;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        body.mode-rules .rule-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 150, 255, 0.1);
        }

        body.mode-rules .rule-number {
            display: inline-block;
            padding: 0 10px;
            height: 28px;
            background-color: #0096ff;
            color: white;
            border-radius: 14px;
            text-align: center;
            line-height: 28px;
            font-weight: 600;
            font-size: 14px;
            margin-right: 12px;
            margin-bottom: 10px;
        }

        body.mode-rules .rule-content {
            color: #475569;
            font-size: 15px;
        }

        body.mode-rules .rules-footer {
            text-align: center;
            margin-top: 50px;
            padding: 25px;
            color: #64748b;
            font-size: 14px;
            font-weight: 500;
            border-top: 1px solid #e2e8f0;
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            body.mode-default .glitch-tech { font-size: 5.5rem; letter-spacing: 6px; }
            body.mode-default .subtitle-tech { font-size: 1.2rem; }
            body.mode-default .info-panel { padding: 25px 25px 45px 25px; min-height: 200px; }
            body.mode-default .quote-display { font-size: 1.3rem; min-height: 120px; }
            body.mode-default .container { padding: 35px 25px; }
            body.mode-default .actions { flex-direction: column; align-items: center; }
            body.mode-default .action-btn { width: 100%; max-width: 320px; justify-content: center; }
            body.mode-default #runaway-btn { display: none !important; }
            
            body.mode-rules .rules-header { margin-bottom: 30px; padding: 20px 0; }
            body.mode-rules .rules-avatar { width: 80px; height: 80px; }
            body.mode-rules h1 { font-size: 24px; }
        }
    </style>
</head>
<body class="mode-default">
    <!-- 默认 404 内容容器 -->
    <div id="default-404-wrapper">
        <canvas id="particles-canvas"></canvas>
        <div class="container">
            <div class="title-section">
                <h1 class="glitch-tech">404</h1>
                <p class="subtitle-tech"><i class="fas fa-satellite-dish"></i> 信号中断 · 全屏逃脱模式已激活</p>
            </div>
            <div class="info-panel">
                <button class="refresh-quote-btn" id="refreshQuoteBtn" title="换一句语录">
                    <i class="fas fa-sync-alt"></i>
                </button>
                <div class="quote-display" id="quoteDisplay"></div>
                <div class="quote-signature">——深空网络响应</div>
            </div>
            <div class="actions">
                <a href="/" class="action-btn btn-home"><i class="fas fa-window-restore"></i> 返回主界面</a>
                <a href="javascript:history.back()" class="action-btn"><i class="fas fa-arrow-circle-left"></i> 重新路由</a>
                <a href="mailto:your-email@example.com" class="action-btn"><i class="fas fa-terminal"></i> 联系管理员</a>
            </div>
            <footer>
                <p>© <span id="currentYear"></span> 深空网络协议 | 错误日志 #<span id="errorCode"></span></p>
                <p class="hint" style="margin-top:10px; font-size:0.9rem; color:#6a9bb8; font-style:italic;"><i class="fas fa-gamepad"></i> 提示：中央按钮可在全屏幕自由移动，试试追捕它！</p>
            </footer>
        </div>
        <button id="runaway-btn"><i class="fas fa-crosshairs"></i> 来抓我啊！</button>
    </div>

    <!-- 规则 404 内容容器 -->
    <div id="rules-404-wrapper">
        <div class="rules-container">
            <div class="rules-header">
                <img src="" alt="群头像" class="rules-avatar" id="group-avatar">
                <div class="rules-title-section">
                    <h1>群公告未找到</h1>
                    <div class="rules-subtitle">该群暂时没有群公告，请联系群主或管理员。</div>
                </div>
            </div>
            <div class="rules-content-area">
                <div class="rule-item">
                    <div class="rule-number">提示</div>
                    <div class="rule-content">如果您认为这是一个错误，请检查您输入的群号是否正确。</div>
                </div>
            </div>
            <div class="rules-footer">
                <p><strong>**蛋码研究院-云云鬼才**</strong></p>
            </div>
        </div>
    </div>

    <script>
        // ========== 路由切换逻辑 ==========
        const isRulesPage = window.location.pathname.includes('/page/eggyhub/rules/');
        
        if (isRulesPage) {
            document.body.className = 'mode-rules';
            initRulesPage();
        } else {
            document.body.className = 'mode-default';
            initDefaultPage();
        }

        // ========== 规则页面初始化 ==========
        function initRulesPage() {
            const avatarElement = document.getElementById('group-avatar');
            const pathSegments = window.location.pathname.split('/');
            let groupId = null;
            for (let i = pathSegments.length - 1; i >= 0; i--) {
                if (!isNaN(pathSegments[i]) && pathSegments[i].length > 5) {
                    groupId = pathSegments[i];
                    break;
                }
            }
            if (groupId) {
                avatarElement.src = `http://p.qlogo.cn/gh/${groupId}/${groupId}/640`;
            } else {
                avatarElement.style.display = 'none'; 
            }
        }

        // ========== 默认页面初始化 ==========
        function initDefaultPage() {
            // 初始化基础信息
            document.getElementById('currentYear').textContent = new Date().getFullYear();
            document.getElementById('errorCode').textContent = Math.floor(Math.random() * 9000) + 1000;

            // 语录库
            const quotes = [
                "页面不见了？很正常，智者向内寻求力量。",
                "这个页面可能去追求自由和远方了，就像你一直想的那样。",
                "别找了，不存在的页面就像你明天要早起一样虚无。",
                "404不是错误，是一次意外的数字冥想。",
                "你发现了一个开发者都没发现的隐藏关卡，可惜没奖励。",
                "这里什么都没有，除了你浪费的这几秒钟。珍惜它。",
                "错误代码：404。深层含义：给你一个冷静思考人生的机会。",
                "错误404：宇宙是沉默的，但你的点击在此产生了回响。",
                "这个页面存在于另一个概率云中。观测行为导致了它的坍缩。",
                "协议连接超时。服务器回应：“意义本身在此处也是404。”",
                "你发现了一个空指针。伟大的探索总是从面对虚无开始。",
                "路径解析失败。但失败本身，是宇宙最可靠的常数之一。",
                "页面未找到。这或许证明了，虚无是存在的终极形式。",
                "你访问的坐标是空的。但空，不正是所有可能性的起点吗？",
                "404。一个完美的错误，存在于这个不完美的数字世界。",
                "这里什么也没有。但“没有”本身，不正是一个有趣的东西吗？",
                "别找了。这个页面比你明天的计划还要虚无。",
                "存在的缺席，比虚无本身更为深邃。",
                "你寻找的页面从未被书写——它存在于所有可能性的交汇处。",
                "空无不是缺失，而是未经雕琢的完满。",
                "404：一个完美的数字，标记着不完美的存在状态。",
                "未找到的，或许正是寻找这一行为本身的意义。",
                "在数据的海洋中，有些岛屿注定不被发现。",
                "虚无是宇宙留白的艺术，而你正凝视着它的杰作。",
                "存在先于本质，但错误先于理解。",
                "知识的边界之外，是更为广袤的无知。",
                "我们不是在寻找答案，而是在学习如何面对没有答案。",
                "真理像光锥，你永远无法抵达它的边界。",
                "理解是有限的，但误解的维度是无限的。",
                "盲点不是视野的缺陷，而是视野的本质。",
                "当下的缺失，是时间给出的永恒命题。",
                "这一秒的404，是下一秒所有可能性的总和。",
                "未来不会加载，因为现在从未完成缓冲。",
                "在数字永恒中，每一个错误都是时间性的褶皱。",
                "你遭遇的不是一个错误，而是时间流中的一处湍流。",
                "代码无法编译的，思想可以解构。",
                "我们是自己创造的系统的第一代异乡人。",
                "比特不会思考，但它们的排列组合正在思考我们。",
                "这个错误不是漏洞，而是系统向你展露的诚实。",
                "在模拟之中，何为真实已不再重要。",
                "人类创造404，然后学会在404中创造意义。",
                "无意义不是终点，而是自由思考的起点。",
                "荒诞是理性面对世界时，世界回以的微笑。",
                "我们给错误赋予意义，然后惊讶于意义的深度。",
                "如果一切都有意义，那么意义本身将毫无意义。",
                "最深刻的真理往往隐藏在系统错误的信息里。",
                "在宇宙尺度上，每一个404都是微不足道的必然。",
                "星光的延迟抵达，与页面的无法加载，共享着同样的物理法则。",
                "你的困惑，不过是熵增宇宙中的一个微小涟漪。",
                "黑暗不是光的缺失，而是光尚未抵达的状态。",
                "当你在寻找外部答案时，答案正在内部重构自身。",
                "意识是宇宙中唯一的“404 Not Found”错误提示器。",
                "我们既是寻找者，也是被寻找之物。",
                "认知的每一次跃进，都始于承认“我不知道”。",
                "你找不到页面，却找到了思考找不到页面的自己。"
            ];

            let currentTypingTimeout = null;
            let currentQuoteIndex = 0;

            function typeWriter(text, element, speed = 35) {
                if (currentTypingTimeout) clearTimeout(currentTypingTimeout);
                element.innerHTML = '';
                let i = 0;
                function type() {
                    if (i < text.length) {
                        element.innerHTML = text.substring(0, i + 1) + '<span class="typing-cursor"></span>';
                        i++;
                        currentTypingTimeout = setTimeout(type, speed);
                    } else {
                        element.innerHTML = text + '<span class="typing-cursor"></span>';
                    }
                }
                type();
            }

            function showRandomQuote() {
                let newIndex;
                do { newIndex = Math.floor(Math.random() * quotes.length); } while (newIndex === currentQuoteIndex);
                currentQuoteIndex = newIndex;
                typeWriter(quotes[currentQuoteIndex], document.getElementById('quoteDisplay'), 25);
            }

            // 粒子系统
            function initParticles() {
                const canvas = document.getElementById('particles-canvas');
                const ctx = canvas.getContext('2d');
                let particles = [];
                const particleCount = 120;
                function resizeCanvas() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
                resizeCanvas();
                window.addEventListener('resize', resizeCanvas);
                class Particle {
                    constructor() {
                        this.x = Math.random() * canvas.width;
                        this.y = Math.random() * canvas.height;
                        this.size = Math.random() * 2.5 + 0.8;
                        this.speedX = (Math.random() - 0.5) * 0.8;
                        this.speedY = (Math.random() - 0.5) * 0.8;
                        this.color = Math.random() > 0.7 ? 'rgba(185, 103, 255, 0.7)' : 'rgba(0, 243, 255, 0.7)';
                        this.alpha = Math.random() * 0.6 + 0.3;
                        this.waveOffset = Math.random() * Math.PI * 2;
                    }
                    update() {
                        this.waveOffset += 0.05;
                        this.x += this.speedX + Math.sin(this.waveOffset) * 0.3;
                        this.y += this.speedY + Math.cos(this.waveOffset) * 0.3;
                        if (this.x > canvas.width) this.x = 0; if (this.x < 0) this.x = canvas.width;
                        if (this.y > canvas.height) this.y = 0; if (this.y < 0) this.y = canvas.height;
                    }
                    draw() {
                        ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                        const gradient = ctx.createRadialGradient(this.x, this.y, 0, this.x, this.y, this.size * 2);
                        gradient.addColorStop(0, this.color); gradient.addColorStop(1, 'rgba(0, 243, 255, 0)');
                        ctx.fillStyle = gradient; ctx.fill();
                    }
                }
                for (let i = 0; i < particleCount; i++) particles.push(new Particle());
                function animateParticles() {
                    if (document.body.className !== 'mode-default') return;
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    for (let particle of particles) { particle.update(); particle.draw(); }
                    requestAnimationFrame(animateParticles);
                }
                animateParticles();
            }

            // 逃跑按钮
            const runawayBtn = document.getElementById('runaway-btn');
            function isNarrowScreen() { return window.innerWidth <= 768; }
            if (!isNarrowScreen()) {
                let isMoving = false;
                document.addEventListener('mousemove', (e) => {
                    if (!runawayBtn || isMoving || document.body.className !== 'mode-default') return;
                    const btnRect = runawayBtn.getBoundingClientRect();
                    const btnCenterX = btnRect.left + btnRect.width / 2;
                    const btnCenterY = btnRect.top + btnRect.height / 2;
                    const distance = Math.sqrt(Math.pow(e.clientX - btnCenterX, 2) + Math.pow(e.clientY - btnCenterY, 2));
                    if (distance < 150) {
                        isMoving = true;
                        const deltaX = btnCenterX - e.clientX; const deltaY = btnCenterY - e.clientY;
                        const length = Math.max(Math.sqrt(deltaX*deltaX + deltaY*deltaY), 0.1);
                        const moveX = (deltaX / length) * (150 - distance) * 0.6;
                        const moveY = (deltaY / length) * (150 - distance) * 0.6;
                        let newX = (parseFloat(runawayBtn.style.left) || window.innerWidth/2) + moveX;
                        let newY = (parseFloat(runawayBtn.style.top) || window.innerHeight/2) + moveY;
                        runawayBtn.style.left = Math.max(50, Math.min(window.innerWidth - 50, newX)) + 'px';
                        runawayBtn.style.top = Math.max(50, Math.min(window.innerHeight - 50, newY)) + 'px';
                        setTimeout(() => { isMoving = false; }, 100);
                    }
                });
                runawayBtn.addEventListener('click', () => {
                    runawayBtn.innerHTML = '<i class="fas fa-check-circle"></i> 抓到了！';
                    showRandomQuote();
                    setTimeout(() => { runawayBtn.innerHTML = '<i class="fas fa-crosshairs"></i> 来抓我啊！'; }, 2000);
                });
            }

            document.getElementById('refreshQuoteBtn').addEventListener('click', showRandomQuote);
            initParticles();
            showRandomQuote();
        }

        // ========== 通用波纹效果 ==========
        document.querySelectorAll('.action-btn, .refresh-quote-btn, #runaway-btn').forEach(button => {
            button.addEventListener('click', function(e) {
                const ripple = document.createElement('span');
                const rect = this.getBoundingClientRect();
                const size = Math.max(rect.width, rect.height);
                ripple.style.cssText = `position:absolute;border-radius:50%;background:rgba(0,243,255,0.6);transform:scale(0);animation:ripple 0.6s linear;width:${size}px;height:${size}px;top:${e.clientY-rect.top-size/2}px;left:${e.clientX-rect.left-size/2}px;pointer-events:none;z-index:1;`;
                this.appendChild(ripple);
                setTimeout(() => ripple.remove(), 600);
            });
        });

        const rippleStyle = document.createElement('style');
        rippleStyle.textContent = `@keyframes ripple { to { transform: scale(4); opacity: 0; } }`;
        document.head.appendChild(rippleStyle);
    </script>
</body>
</html>
